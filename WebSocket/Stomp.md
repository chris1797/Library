# STOMP (Simple Text Oriented Messaging Protocol)

STOMP (Simple Text Oriented Messaging Protocol) 는 메시징 프로토콜 중 하나로, 주로 클라이언트와 메시지 브로커 간의 통신을 위해 사용된다. 

STOMP는 WebSocket과 같은 전송 프로토콜 위에서 기반하여 동작하며, 메시지를 쉽게 보내고 받을 수 있도록 텍스트 기반으로 설계되었다. 서버와 클라이언트가 메시지를 구독(subscribe)하거나 발행(publish)하는 구조로, 채팅 애플리케이션, 실시간 알림 시스템, 주식 정보 시스템 등에서 많이 사용된다.

<br/>

## STOMP 주요 개념
- __발행/구독 모델__ : 클라이언트들은 특정 주제(topic)를 구독할 수 있고, 해당 주제로 메시지가 발행되면 구독한 클라이언트들이 메시지를 수신한다.


- __프레임 구조__ : STOMP 메시지는 __텍스트 프레임__ 으로 구성되며, 주요 프레임으로 `CONNECT`, `SEND`, `SUBSCRIBE`, `UNSUBSCRIBE`, `DISCONNECT` 등이 있다.


- __메시지 브로커__ : STOMP 프로토콜은 주로 메시지 브로커 소프트웨어(ex. RabbitMQ, ActiveMQ)와 함께 사용된다. 메시지 브로커는 클라이언트가 메시지를 발행하고 구독할 수 있도록 관리하는 역할을 한다.


<br/>

## STOMP와 WebSocket의 관계
둘은 함께 결합되어 주로 사용된다. WebSocket이 양방향 통신을 위한 네트워크 프로토콜이라면, STOMP는 WebSocket 위에서 동작하는 메시징 프로토콜이다. <br/>

### 1. 역할의 차이
- __WebSocket__ : 클라이언트와 서버 간의 영구적인 연결을 생성하고 양방향으로 데이터를 전송할 수 있게 해주는 전송 프로토콜이다. <br/>
    WebSocket 자체는 메시지 형식이나 처리 방식에 대한 규약이 없기 때문에, 클라이언트와 서버가 주고받는 데이터는 그저 `문자열`로 처리된다.

  
- __STOMP__ : 메시지의 형식과 처리 방식을 규정하는 __애플리케이션 프로토콜__ 이다. WebSocket 연결 위에서 동작하여, __데이터를 프레임(frame) 형태로 전송__ 하고, <br/>
    주로 발행/구독 모델을 활용해 메시지를 주고받는 데 적합하다.

### 2. 메시징 규약
STOMP는 WebSocket 연결을 통해 주고받는 메시지의 포맷을 지정해준다. WebSocket을 통해 메시지를 직접 주고받으려면 문자열로 인코딩하거나 
JSON으로 데이터를 포맷해야 하지만, STOMP는 각 메시지에 명확한 프레임 형식을 제공하여 메시지 구독, 발행, 연결 관리 등을 쉽게 할 수 있게 한다.

### 3. pub/sub 모델 지원
STOMP는 `주제(topic)` 개념을 사용해 메시지의 pub/sub 모델을 지원한다. __WebSocket은 주로 특정 채널 개념이 없고__ 단일 연결에서 데이터를 주고받기 때문에, <br/>
WebSocket만으로 발행/구독 구조를 구현하려면 추가 로직이 필요하다. STOMP는 이런 복잡한 로직을 간편하게 구현할 수 있도록 지원한다.

